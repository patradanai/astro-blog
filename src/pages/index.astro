---
import { AstroSeo } from '@astrolib/seo';

import Layout from '@src/layouts/Layout.astro';
import Card from '@src/components/Card/Card.astro';
import { hygraphService } from '@src/services/hygraphService';
import CardLarge from '@src/components/Card/CardLarge.astro';
import Button from '@src/components/Button/Button.astro';


const { data } = await hygraphService().getBlogs();

// Astro.locals.cache(0);
---

<Layout title='Welcome to Astro.' transition:animate='slide'>
	<AstroSeo slot='head' title={'Blog'} description={'Blog'} />
	<div class='container mx-auto'>
		<div class='py-20 px-10'>
			<section class='px-8'>
				<CardLarge />
			</section>
			<section class='px-8'>
				<p class='text-3xl font-bold mb-5'>Latest Blogs</p>
				<div class='grid grid-cols-1 md:grid-cols-2 grid-flow-row gap-5'>
					{
						data.blogs.map((v) => {
							const category = v.category.map((category) => category.name);
							return (
								<Card
									title={v.title}
									alt='alt'
									desc={v.description}
									category={category}
									datetime={v.publishedAt}
									href={`/blogs/${v.slug}`}
									srcImage={v.desktopImage.url}
								/>
							);
						})
					}
				</div>

				<div class='mt-10 flex justify-center'>
					<Button classBtn='w-32' color="primary" variant='contained' type='button'>Load More</Button>
				</div>
			</section>
		</div>
	</div>
</Layout>

<style>
	main {
		margin: auto;
		padding: 1rem;
		width: 800px;
		max-width: calc(100% - 2rem);
		color: white;
		font-size: 20px;
		line-height: 1.6;
	}
</style>
